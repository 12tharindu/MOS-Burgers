<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOS Burgers</title>
    <link rel="icon" type="image/png" href="logo-photoaidcom-cropped.jpg">
    <link rel="stylesheet" href="HomepageStyles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.13/jspdf.plugin.autotable.min.js"></script>
    <script src="app.js" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <header class="topnav">
        <img src="Logo.jpg" alt="logo" class="logo">
        <label class="tagline">" Savor every Savory Bite... "</label>
        <nav class="nav-links">
            <a id="home" href="HomepageHtml.html">Home</a>
            <a href="menupage.html">Menu</a>
            <a href="Branches.html">Branches</a>
            <a href="reports.html">Your Reports</a>
            <a href="login.html" id="logBtn">Admin</a>
        </nav>
    </header>

    <main>
        <div>
            <table class="orderttable" id="cartTable">
                <thead>
                    <tr>
                        <th>Item ID</th>
                        <th>Item Name</th>
                        <th>Unit Price</th>
                        <th>Quantity</th>
                        <th>Discount</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Table rows will be dynamically added here -->
                </tbody>
            </table>
        </div>

    <div class="mainCart">
        <div class="cartPage">
            <h1 class="cusDetailsHead"><center>Customer Details</center></h1>
            <div class="mb-3 row">
                <label for="NIC" class="col-sm-2 col-form-label">NIC</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="CusNIC" required>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="CusName" class="col-sm-2 col-form-label">Name</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="CusName" required>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="CusAddress" class="col-sm-2 col-form-label">Address</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="CusAddress" required>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="CusContact" class="col-sm-2 col-form-label">Contact</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="CusContact" required>
                </div>
            </div>
        </div>

        <div class="orderdetailsPage">
            <h1 class="cusDetailsHead"><center>Order Details</center></h1>
            <div class="mb-3 row">
                <label for="SubTotal" class="col-sm-2 col-form-label">Sub Total</label>
                <div class="col-sm-10">
                    <input type="text" class="form-controll" id="SubTotal" readonly>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="Discount" class="col-sm-2 col-form-label">Discount</label>
                <div class="col-sm-10">
                    <input type="text" class="form-controll" id="Discount" readonly>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="Delivery" class="col-sm-2 col-form-label">Delivery</label>
                <div class="col-sm-10">
                    <input type="text" class="form-controll" id="Delivery" readonly>
                </div>
            </div>
            <div class="mb-3 row">
                <label for="Total" class="col-sm-2 col-form-label">Total</label>
                <div class="col-sm-10">
                    <input type="text" class="form-controll" id="Total" readonly>
                </div>
            </div>
        </div>
    </div>

    <div class="orderbtns">
        <input type="button" class="placeOrder" value="Place Order" onclick="validateAndPlaceOrder()">

        <input type="button" class="back" value="Back to Menu" onclick="location.href='menupage.html'">
    </div>

    <footer class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <h6>About</h6>
                    <p class="text-justify">"At MOS Burgers, we are passionate about crafting mouthwatering burgers with the freshest ingredients. From our signature juicy patties to our unique flavor combinations, every bite is a delicious experience. Join us for a meal thatâ€™s as unforgettable as it is satisfying."</p>
                </div>

                <div class="col-xs-6 col-md-3">
                    <h6>Contact Us</h6>
                    <ul class="footer-links">
                        <li>Call - 0662233412</li>
                        <li>Email - mosBurgs@email.com</li>
                        <li>Whatsapp - +94 712 345 678</li>
                        <li>Messenger - fb.mosBurgs</li>
                    </ul>
                </div>

                <div class="col-xs-6 col-md-3">
                    <h6>Follow Us On</h6>
                    <ul class="footer-links">
                        <li>Instagram - @mosBurgs</li>
                        <li>Facebook - mosBurgs</li>
                        <li>Threads - @mosBurgs</li>
                        <li>Twitter - @mosBurgs.shop</li>
                    </ul>
                </div>
            </div>
            <hr>
        </div>

        <h8><center><b>Copyright &copy; 2024 All Rights Reserved. </b></center></h8>
    </footer>

    <script>
        // Load cart data on page load
        document.addEventListener('DOMContentLoaded', (event) => {
            loadCartData();
        });

        function validateAndPlaceOrder() {
        // Get the values of the customer details fields
        const nic = document.getElementById('CusNIC').value.trim();
        const name = document.getElementById('CusName').value.trim();
        const contact = document.getElementById('CusContact').value.trim();
        const address = document.getElementById('CusAddress').value.trim();
        
        if (!nic || !name || !address || !contact) {
            alert('Please provide Customer Details !');
            return; 
        }
       

        generatePDF();
    }

        

        function loadCartData() {
            const subTotal = localStorage.getItem('subTotal') || 0;
            const discount = localStorage.getItem('discount') || 0;
            const deliveryCharge = 300; // Fixed delivery charge
            const total = parseFloat(subTotal) - parseFloat(discount) + deliveryCharge;

            document.getElementById('SubTotal').value = "+ Rs " + subTotal + "/=";
            document.getElementById('Discount').value = " - Rs " + discount + "/=";
            document.getElementById('Delivery').value = "+ Rs " + deliveryCharge + "/=";
            document.getElementById('Total').value = "Rs " + total + "/=";
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            const orderId = "OD" + new Date().getTime().toString().slice(-6); // Generate Order ID
            const date = new Date().toLocaleDateString();
            const time = new Date().toLocaleTimeString();

            const subTotal = document.getElementById('SubTotal').value;
            const discount = document.getElementById('Discount').value;
            const delivery = document.getElementById('Delivery').value;
            const total = document.getElementById('Total').value;

            const nic = document.getElementById('CusNIC').value;
            const name = document.getElementById('CusName').value;
            const contact = document.getElementById('CusContact').value;
            const address = document.getElementById('CusAddress').value;


            // Add a title and some styling
            doc.setFontSize(28);
            doc.text("Order Details", 80, 19);


            // Add order details
            doc.setFontSize(12);
            doc.text("Order ID : " + orderId, 13, 28);
            doc.text("Date : " + date, 13, 38);
            doc.text("Time : " + time, 13, 48);
            doc.text("Sub Total : " + subTotal, 13, 58);
            doc.text("Discount : " + discount, 13, 68);
            doc.text("Delivery : " + delivery, 13, 78);
            doc.text("Total : " + total, 13, 88);

            // Add customer details
            doc.text("Customer NIC : " + nic, 13, 98);
            doc.text("Customer Name : " + name, 13, 108);
            doc.text("Customer Contact : " + contact, 13, 118);
            doc.text("Customer Address : " + address, 13, 128);
            

            // Add some design elements like borders
            doc.setLineWidth(0.2);
            doc.rect(5, 5, 200, 130); // Main border
            doc.rect(7, 7, 196, 126); // Inner border

            // Optionally add a logo
            const img = new Image();
            img.src = '_77e95e81-c282-4e1d-9649-e2d53c3df77a.jpeg';
            img.onload = function () {
                doc.addImage(img, 'JPEG', 110, 29, 80, 80);
                doc.save("Order_Details.pdf");
            };
        }
    </script>
</body>
</html>
